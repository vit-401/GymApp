## AI change log

- [2026-02-08T18:30:00Z] src/features/workout/components/ExerciseCard.tsx — Make unassigned exercise slots clickable; tap opens exercise picker dialog to assign exercise from workout page. Replace disabled opacity card with dashed-border + "Tap to assign" CTA. Add dayNumber prop.
- [2026-02-08T18:30:00Z] src/features/workout/components/ExercisePickerDialog.tsx — New dialog: lists exercises filtered by muscle group, allows quick assignment from workout page. Shows empty state if no exercises exist for the group.
- [2026-02-08T18:30:00Z] src/features/workout/components/WorkoutDayView.tsx — Pass currentDayNumber to ExerciseCard as dayNumber prop for exercise assignment wiring.
- [2026-02-08T18:45:00Z] src/features/workout/components/ExerciseCard.tsx — Rewrite: slots ARE the exercises (fixed). Every card now shows muscle group label + "+" button to log sets. Removed exercise picker, removed Exercise dependency. Uses slot.id as exerciseId.
- [2026-02-08T18:45:00Z] src/features/workout/components/AddSetDialog.tsx — Simplified: no longer requires Exercise object. Accepts name string. Always shows reps + weight + multiplier inputs. Added useEffect to sync lastSet defaults.
- [2026-02-08T18:45:00Z] src/features/workout/components/WorkoutDayView.tsx — Removed dayNumber prop from ExerciseCard (no longer needed).
- [2026-02-08T18:45:00Z] src/features/workout/components/ExercisePickerDialog.tsx — Deleted, not needed since exercises are fixed slots.
- [2026-02-08T21:41:14Z] src/features/workout/components/ExerciseCard.tsx — Add confirmation prompt before deleting a set to prevent accidental removal.
- [2026-02-08T21:42:54Z] src/features/workout/components/ExerciseCard.tsx — Replace browser confirm with custom dialog; add cancel/delete actions for set removal.
- [2026-02-08T21:46:22Z] src/stores/timer.store.ts — Add setRemaining to update current timer seconds while keeping default duration unchanged.
- [2026-02-08T21:46:22Z] src/components/Timer/Timer.tsx — Make timer display clickable; add dialog to set current seconds, reset running state, keep default at 120s.
- [2026-02-08T21:48:32Z] src/features/workout/components/WorkoutDayView.tsx — Gate "Complete Day" button; enable only when every slot has at least one set logged.
- [2026-02-08T22:10:00Z] src/features/workout/stores/workout.store.ts — Add uncompleteSession and isDayCompletedToday actions to support day completion state checks and re-editing.
- [2026-02-08T22:10:00Z] src/features/workout/components/DaySelector.tsx — Show green styling + check badge on day buttons whose today-session is completed; 4 visual states (selected+completed, completed, selected, default).
- [2026-02-08T22:10:00Z] src/features/workout/components/ExerciseCard.tsx — Add readOnly prop; hides "+" add-set and "x" delete-set buttons when true to lock completed workouts.
- [2026-02-08T22:10:00Z] src/features/workout/components/WorkoutDayView.tsx — Pass readOnly to ExerciseCard when completed; replace static "Completed" text with "Edit Workout" button that uncompletes the session.
- [2026-02-08T22:25:00Z] src/features/workout/utils/export.ts — Rewrite export: new formatSessionText uses slots/muscle-group labels directly instead of exercise lookup; outputs clean reps-multiplier*weight format.
- [2026-02-08T22:25:00Z] src/features/workout/components/WorkoutDayView.tsx — Add "Copy Summary" button + dialog on completed days; shows formatted workout text with one-tap clipboard copy. Moved freshSession/isCompleted above hooks to fix ordering.
- [2026-02-08T22:33:00Z] src/pages/SettingsPage.tsx — Fix export sessions usage: use new formatSessionText with program days; remove exercise lookup to match new export API.
- [2026-02-08T22:40:00Z] src/features/workout/components/WorkoutDayView.tsx — Make copy robust: clipboard API + fallback, show confirmation/error tag in dialog, reset on close.
- [2026-02-08T22:40:00Z] src/pages/SettingsPage.tsx — Add clipboard fallback + error message for export copy.
- [2026-02-08T22:47:00Z] src/features/workout/components/WorkoutDayView.tsx — Add Select Text option and auto-select on copy failure for mobile; improve fallback copy by focusing readonly textarea.
- [2026-02-08T22:47:00Z] src/pages/SettingsPage.tsx — Add Select Text button + auto-select on copy failure; improve fallback copy for mobile.
- [2026-02-08T22:55:00Z] src/features/workout/utils/export.ts — Prefer actual exercise names via slot.exerciseId; fallback to muscle group label when missing.
- [2026-02-08T22:55:00Z] src/features/workout/components/WorkoutDayView.tsx — Pass getExerciseById into formatSessionText for per-exercise labels in copy summary.
- [2026-02-08T22:55:00Z] src/pages/SettingsPage.tsx — Use getExerciseById in export text to show exercise names instead of "Unknown."
- [2026-02-08T23:30:00Z] (workspaceEdit, 31 files) — Add comprehensive English JSDoc and inline comments across entire codebase for AI comprehension: file-level @file blocks with business context, inline comments on non-trivial logic, domain model documentation, store action descriptions, UI component purpose docs. No runtime changes.
- [2026-02-08T23:30:00Z] .cursor/rules/front-end-ts-rules.mdc — Add "File-Level JSDoc Rule" and "Inline Comment Guidelines" sections to enforce English comments with business context on every file for AI readability.
- [2026-02-09T00:21:00Z] vite.config.ts — Fix PWA installability: switch manifest icons from SVG to PNG (192+512), add vite-plugin-mkcert for HTTPS local preview, fix maskable icon purpose.
- [2026-02-09T00:21:00Z] scripts/generate-icons.mjs — New script: generates PNG icons (192x192, 512x512) from SVG source using sharp.
- [2026-02-09T00:21:00Z] package.json — Add sharp + vite-plugin-mkcert devDeps; add preview:host and generate-icons scripts.
- [2026-02-13T04:34:10Z] (workspaceEdit, 7 files) — Seed deterministic image-based exercises, pre-bind default D1–D7 slots to those exercise IDs, and show previous performance (sets/reps/last/top weight) per exercise image on workout cards and Add Set dialog without overwriting custom persisted structure.
- [2026-02-13T04:50:00Z] (workspaceEdit, 3 files) — Change "last time" display from summary line to full set-by-set breakdown; PreviousExerciseStats now carries full sets array; ExerciseCard shows previous sets when no current sets logged; AddSetDialog lists every previous set inline.
- [2026-02-13T05:00:00Z] src/features/workout/components/ExerciseCard.tsx — Add image preview: tap thumbnail opens full-size image in dialog with close button; click overlay or X to close.
- [2026-02-13T04:49:03Z] src/features/workout/components/ExerciseCard.tsx — Improve exercise photo UX: enlarge thumbnail in card, use dark large preview modal with contained image, and strengthen close button visibility for reliable open/close behavior.
- [2026-02-13T04:50:43Z] src/features/workout/components/ExerciseCard.tsx — Remove duplicate custom close button from image preview modal and keep only default dialog close control to avoid two X buttons.
- [2026-02-13T04:51:56Z] src/features/workout/components/ExerciseCard.tsx — Add hidden dialog title and description in image preview modal to satisfy DialogContent accessibility requirement for screen readers without changing visual UI.
- [2026-02-13T05:23:42Z] WORKOUT-PROGRAM.md — Refactor workout documentation into clean per-day markdown tables with explicit rest column and consistent formatting; keep 120s default and 60s for ABS/Calves for readability.
- [2026-02-13T05:25:07Z] WORKOUT-PROGRAM.md — Add photo filename column for every exercise row across D1–D7 tables to map each slot to its unique image asset alongside rest seconds.
- [2026-02-13T05:00:00Z] WORKOUT-PROGRAM.md — New file: 7-day program structure with muscle groups and rest seconds (120s default, 60s for ABS and Calves).
- [2026-02-13T06:15:00Z] src/types/index.ts — Add REST_SECONDS_BY_MUSCLE_GROUP constant mapping each muscle group to its rest duration (120s default, 60s for ABS/Calves).
- [2026-02-13T06:15:00Z] src/features/workout/components/WorkoutDayView.tsx — Auto-set rest timer after logging a set; derives rest seconds from the slot's muscle group via REST_SECONDS_BY_MUSCLE_GROUP so timer is ready to start.